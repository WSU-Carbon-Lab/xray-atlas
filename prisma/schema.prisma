generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlserver"
  url      = env("DATABASE_URL")
}

model Experiment {
  ExperimentID   String      @id(map: "PK_Experiment") @db.UniqueIdentifier
  PrepID         String      @db.UniqueIdentifier
  Syncrotron     String      @db.VarChar(Max)
  NexafsMethod   String      @db.VarChar(Max)
  AtomAbsorber   String      @db.VarChar(3)
  AbsorbtionEdge String      @db.VarChar(10)
  Description    String      @db.VarChar(Max)
  Preparation    Preparation @relation(fields: [PrepID], references: [PrepID], onUpdate: NoAction, map: "FK_Experiment_Prep")
  NEXAFS         NEXAFS[]

  @@index([PrepID], map: "IDX_Experiment_Prep")
}

model Molecules {
  MoleculeID                                        String        @id(map: "PK_Molecules") @db.UniqueIdentifier
  Identifier                                        String?       @db.VarChar(Max)
  IdentifierType                                    String        @db.Text
  Source                                            String?       @db.VarChar(Max)
  Name                                              String?       @db.VarChar(Max)
  Preparation_Preparation_PrimaryMolIDToMolecules   Preparation[] @relation("Preparation_PrimaryMolIDToMolecules")
  Preparation_Preparation_SecondaryMolIDToMolecules Preparation[] @relation("Preparation_SecondaryMolIDToMolecules")
}

model NEXAFS {
  ID           BigInt     @id(map: "PK_NEXAFS")
  Theta        Float
  E            Float
  Mu           Float
  ExperimentID String     @db.UniqueIdentifier
  Experiment   Experiment @relation(fields: [ExperimentID], references: [ExperimentID], onUpdate: NoAction, map: "FK_NEXAFS_Experiment")

  @@index([ExperimentID], map: "IDX_NEXAFS_Experiment")
}

model Preparation {
  PrepID                                          String       @id(map: "PK_Preparation") @db.UniqueIdentifier
  PrimaryMolID                                    String       @db.UniqueIdentifier
  SecondaryMolID                                  String?      @db.UniqueIdentifier
  Method                                          String       @db.Text
  SpinRate                                        Float?
  SubTemp                                         Float?
  DepTemp                                         Float?
  DepTime                                         Decimal?     @db.Decimal(18, 0)
  Concentration                                   Decimal?     @db.Decimal(18, 0)
  Experiment                                      Experiment[]
  Molecules_Preparation_PrimaryMolIDToMolecules   Molecules    @relation("Preparation_PrimaryMolIDToMolecules", fields: [PrimaryMolID], references: [MoleculeID], onUpdate: NoAction, map: "FK_Preparation_PrimaryMol")
  Molecules_Preparation_SecondaryMolIDToMolecules Molecules?   @relation("Preparation_SecondaryMolIDToMolecules", fields: [SecondaryMolID], references: [MoleculeID], onDelete: NoAction, onUpdate: NoAction, map: "FK_Preparation_SecondaryMol")

  @@index([PrimaryMolID], map: "IDX_Preparation_PrimaryMol")
  @@index([SecondaryMolID], map: "IDX_Preparation_SecondaryMol")
}
